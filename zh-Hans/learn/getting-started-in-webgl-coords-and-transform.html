<!DOCTYPE html>
<html class="no-js" lang="zh-Hans">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="p5.js a JS client-side library for creating graphic and interactive experiences, based on the core principles of Processing.">
    <title tabindex="1">learn | p5.js</title>
    <link rel="stylesheet" href="/assets/css/all.css?v=8dd5ca">
    <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inconsolata&display=swap" rel="stylesheet">

    <link rel="shortcut icon" href="/../../assets/img/favicon.ico">
    <link rel="icon" href="/../../assets/img/favicon.ico">


    <script src="/../../assets/js/vendor/jquery-1.12.4.min.js"></script>
    <script src="/../../assets/js/vendor/ace-nc/ace.js"></script>
    <script src="/../../assets/js/vendor/ace-nc/mode-javascript.js"></script>
    <script src="/../../assets/js/vendor/prism.js"></script>
    <script src="/assets/js/init.js?v=97b4f7"></script>

    <script src="/../../assets/js/vendor/pangu.min.js"></script>

  </head>
  <body>

    <a href="#content" class="sr-only">跳到内容</a>
    
    <!-- p5*js language buttons -->
    <div id="i18n-btn">
      <h2 id="i18n-settings" class="sr-only">语言设定</h2>
      <ul id="i18n-buttons" aria-labelledby="i18n-settings">
        <li><a href='#' lang='en' data-lang='en'>English</a></li>
        <li><a href='#' lang='es' data-lang='es'>Español</a></li>
        <li><a href='#' lang='zh-Hans' data-lang='zh-Hans'>简体中文</a></li>
        <li><a href='#' lang='ko' data-lang='ko'>한국어</a></li>
        <li><a href='#' lang='hi' data-lang='hi'>हिन्दी</a></li>
      </ul>
    </div>    <!-- .container -->
    <div class="container">

      <!-- logo -->
      <header id="lockup">
        <a href="/zh-Hans/">
          <img src="/../../assets/img/p5js.svg" alt="p5 homepage" id="logo_image" class="logo" />
          <div id="p5_logo"></div>
        </a>
      </header>
      <!-- close logo -->

      

<style>
  .methodsList {
    font-family: monospace;
    /*white-space: pre;*/
  }

  .additionalInformation {
    width: 100%;
    background-color: #dedeff;
    padding: 10px;
    margin: 30px 0;
  }

  .toc {
    width: 100%;
    background-color: #eee;
    padding: 10px;
    margin: 30px 0;
  }

  .toc h3 {
    margin-top: 15px;
  }

  .indexList {
    padding: 15px;
    background-color: whitesmoke;
  }
</style>

<div id="learn-page">

  
  <!-- site navigation -->
  <div class="column-span">
    <nav class="sidebar-menu-nav-element">
      <h2 id="menu-title" class="sr-only">网站导航</h2>
      <input class="sidebar-menu-btn" type="checkbox" id="sidebar-menu-btn" />
      <label class="sidebar-menu-icon" for="sidebar-menu-btn"><span class="sidebar-nav-icon"></span></label>
      <ul id="menu" class="sidebar-menu" aria-labelledby="menu-title">
        <li><a href="/zh-Hans/">主页</a></li>
        <li><a href="https://editor.p5js.org">编辑器</a></li>
        <li><a href="/zh-Hans/download/">下载</a></li>
        <li><a href="/zh-Hans/download/support.html">捐赠</a></li>
        <li><a href="/zh-Hans/get-started/">入门</a></li>
        <li><a href="/zh-Hans/reference/">参考文献</a></li>
        <li><a href="/zh-Hans/libraries/">程式库</a></li>
        <li><a href="/zh-Hans/learn/">学习</a></li>
        <li><a href="/zh-Hans/teach/">教学</a></li>
        <li><a href="/zh-Hans/examples/">范例</a></li>
        <li><a href="https://p5js.org/contributor-docs/#/">贡献</a></li>
        <li><a href="/zh-Hans/books/">书籍</a></li>
        <li><a href="/zh-Hans/community/">社群</a></li>
        <li><a href="https://showcase.p5js.org">案例展示</a></li>
  
      </ul>
    </nav>
  </div>

  <div class="column-span">

    <main>
      <script src="//toolness.github.io/p5.js-widget/p5-widget.js"></script>

      <iframe src="../../assets/learn/basic3d/titleExample.html" width="720" height="350">
      </iframe>

      <h1>坐标和变换</h1>

      <p>p5.js 是创建 2D 图形的强大工具，同时也能够实现 3D 图形。 要开始使用 3D，需要学习一些新概念，本文档将介绍一些对于任何 3D 程序都非常重要的想法。</p>

      <div class="toc">
        <h3>Table of Contents</h3>
        <ol>
          <li><a href="#what_is_webgl">What is WebGL</a>
          </li>
          <li><a href="#coordinate_space">3D 坐标空间：在 3D 中定位</a></li>
          <li><a href="#transformations">变换：3D 图形的位置和大小</a>
          </li>
          <li><a href="#order">变换的顺序很重要！</a></li>
          <li><a href="#basic_shapes">3D中的基本形状</a>
          </li>
          <li><a href="#conclusion">结论</a></li>
          <li><a href="#glossary">词汇表</a></li>
        </ol>
      </div>

      <h2 id="what_is_webgl">What is WebGL</h2>

      <p>WebGL 是一个库，为我们在 Web 浏览器中创建 3D 图形提供了所需的工具。 简单地说，它允许我们做各种数学运算，帮助排列和显示 3D 对象。 通过其特殊的 WebGL 模式，p5.js 可以更容易地与 WebGL 一起使用。</p>

      <p>在 3D 中工作引入了许多复杂性，尤其是当一个画面涉及到运动、纹理、光照等方面。 幸运的是，计算机有专门的硬件，非常适合执行这些计算，即图形处理单元（GPU）。 GPU 能够同时处理许多事情，这在处理像素和空间中的许多形状时特别重要。</p>

      <p>让我们开始设置 p5.js 来使用 WebGL， 通过将第三个参数传递到 <a class="code">createCanvas()</a>。</p>

      <pre><code class="language-javascript">
      function setup() {
        createCanvas(windowWidth, windowHeight, WEBGL);
        describe('a red box on a white background');
      }

      function draw(){
        background(255);
        fill(255,0,0);
        box();
      }
      </code></pre>

      <h2 id="coordinate_space">3D 坐标空间：在 3D 中定位</h2>

      <div class="additionalInformation">如果坐标系统不太清楚，可以重新查看名为 <a href="{{root}}/learn/coordinate-system-and-shapes.html">坐标系和形状</a> 的教程。<a
          href="/zh-Hans/learn/coordinate-system-and-shapes.html">坐标系和形状</a>.</div>

      <p>在 2D 和 3D 中工作最基本的区别之一是最明显的：多了一个维度。 除了我们图纸中元素的水平和垂直位置（x 和 y 轴）之外，3D 还增加了深度，即 z 轴。</p>

      <p>When drawing in 2D, the point (0,0) is located at the top left corner of the screen. In WebGL mode, the origin of the sketch (0,0,0) is located in the middle of the screen. By default, the x-axis goes left-to-right, y-axis goes up-to-down, and the z-axis goes from further-to-closer.</p>

      <img style="padding:60px;" src='../../assets/learn/basic3d/images/2d3d_coordinates.png'
        alt="an illustration showing a 2D coordinate system on the left, showing an origin of (0,0) and a 3D coordinate system on the right, showing an origin of (0,0,0)">

      <h2 id="transformations">变换：3D 图形的位置和大小</h2>

      <p>p5.js 有一些方法，<a class="code" href="{{root}}/reference/#/p5/translate">translate()</a>、<a class="code" href="{{root}}/reference/#/p5/rotate">rotate()</a> 和 <a class="code" href="{{root}}/reference/#/p5/scale">scale()</a>，可以用来在空间中定位和定向对象。每个方法都会影响所谓的<em>模型矩阵</em>，它们的集合被称为对象的<em>变换</em>。这些方法对于 2D 和 3D 绘制都可用。<a class="code"
          href="/zh-Hans/reference/#/p5/translate">translate()</a>, <a class="code"
          href="/zh-Hans/reference/#/p5/rotate">rotate()</a>, 和  <a class="code"
          href="/zh-Hans/reference/#/p5/scale">scale()</a>, 我们可以使用一些方法在空间中定位和定向对象。每种方法都会影响所谓的<strong>模型矩阵</strong>。 这些方法的集合被称为对象的<strong>变换</strong>。这些方法适用于2D和3D绘图。</p>

      <h3>translate()：将对象移动到指定位置</h3>

      <iframe src="../../assets/learn/basic3d/translateExample.html" width="720" height="350">
      </iframe>

      <p><a class="code" href="/zh-Hans/reference/#/p5/translate">translate()</a> <a class="code" href="{{root}}/reference/#/p5/translate">translate()</a> 可以将原点沿指定方向移动， 调用<a class="code">translate()</a>之后绘制的任何内容都将相对于该点定位。 <a class="code">translate()</a> 接受x、y和z值的参数。使用上面的滑块更改盒子的平移量，看看它沿每个轴如何移动。 下面的代码演示了如何在<a class="code">box()</a> 形状上进行简单的平移。</p>

      <pre><code class="language-javascript">
      ...
      // draw a box 100 units to the right
      translate(100,0,0);
      box();
      ..
      </code></pre>

      <h3>rotate()：将对象定向到指定位置</h3>

      <iframe src="../../assets/learn/basic3d/rotateExample.html" width="720" height="350">
      </iframe>

      <p><a class="code" href="/zh-Hans/reference/#/p5/rotate">rotate()</a> <a class="code" href="{{root}}/reference/#/p5/rotate">rotate()</a>可以将之后绘制的内容重新定向方向。</p>

      <p>有几种方法可以使对象在3D中旋转。大多数情况下，最简单的方法是调用像<a class="code" href="{{root}}/reference/#/p5/rotateX">rotateX()</a>、 <a class="code" href="{{root}}/reference/#/p5/rotateY">rotateY()</a>和 <a class="code" href="{{root}}/reference/#/p5/rotateZ">rotateZ()</a>这样的方法<a class="code"
          href="/zh-Hans/reference/#/p5/rotateX">rotateX()</a>, <a class="code"
          href="/zh-Hans/reference/#/p5/rotateY">rotateY()</a>, 和  <a class="code"
          href="/zh-Hans/reference/#/p5/rotateZ">rotateZ()</a> 它们分别允许围绕特定轴进行旋转。每种方法都接受一个指定旋转角度的参数。 尝试在上面的示例中移动滑块，查看如何在每个轴上执行旋转。 以下代码展示了这些方法的使用。</p>

      <pre><code class="language-javascript">
      ...
      // rotate X, Y, and Z axes by 45 degrees
      rotateX(QUARTER_PI);
      rotateY(QUARTER_PI);
      rotateZ(QUARTER_PI);
      box();
      ..
      </code></pre>

      <p>默认情况下，p5.js将期望角度以弧度为单位。 弧度使用从0- <a class="code">TWO_PI</a>的数字来指定角度。 要使用度数，可以使用<a class="code">radians()</a>将度数转换为弧度， 或使用<a class="code">angleMode(DEGREES)</a>。</p>

      <pre><code class="language-javascript">
      ...
      // rotate each axis by 45 degrees
      rotateX(radians(45));
      box();
      //or
      angleMode(DEGREES);
      rotateY(45);
      box();
      ..
      </code></pre>

      <div class="additionalInformation">
        <p><p>您还可以使用<a class="code" href="{{root}}/reference/#/p5/rotate">rotate()</a>， 它允许您使用向量作为第二个参数指定要围绕哪个轴旋转。</p> <a class="code"
            href="/zh-Hans/reference/#/p5/rotate">rotate()</a> , 它允许您使用向量作为第二个参数指定要围绕哪个轴旋转。</p>
      </div>

      <h3>scale(): 空间尺寸</h3>

      <iframe src="../../assets/learn/basic3d/scaleExample.html" width="720" height="350">
      </iframe>

      <p><a class="code" href="/zh-Hans/reference/#/p5/scale">scale()</a> <a class="code" href="{{root}}/reference/#/p5/scale">scale()</a>会改变其后绘制的任何内容的大小。 与迄今为止描述的其他方法一样，它接受x、y和z值的参数。</p>

      <h2 id="order">变换的顺序很重要！</h2>

      <p>一开始可能感觉难以预测的是变换的顺序。每个变换都会影响下一个变换。例如，如果调用 <a class="code">rotate()</a>，然后是 <a class="code">translate()</a>，那么该平移的方向将受到旋转的影响。整个坐标系在旋转和移动，不仅仅是形状本身。</p>

      <p>变换可以以任何顺序执行，但是使用<strong>translate</strong>、<strong>rotate</strong>，然后<strong>scale</strong>会是最直观的。 先进行平移，然后进行旋转，产生将形状移动到新位置并围绕该位置旋转的效果。</p>

      <p>在下面的例子中，尝试改变<a class="code">translate()</a>和<a class="code">rotateY()</a>的顺序，看看它如何影响对象的绘制位置。</p>

      <script type="text/p5" data-autoplay data-p5-version="1.6.0">
function setup() {
  createCanvas(150, 216, WEBGL);
  debugMode();
  describe('a white box in front of a reference 3D axis and grid, illustrating the applied transforms');
}

function draw(){
  background(255);
  camera(100,-100,100);
  
  translate(25,0,25); 
  rotateY(PI/3);          
  scale(2);

  box(10);
}
      </script>

      <p>p5.js还有一些方法可以控制何时应用变换：<a class="code" href="{{root}}/reference/#/p5/push">push()</a>和<a class="code" href="{{root}}/reference/#/p5/pop">pop()</a>。 <a class="code">push()</a>和<a class="code">pop()</a>使单独移动对象更容易。 <a class="code">push()</a>方法保存并设置当前变换，<a class="code">pop()</a>方法恢复这些变换。 在<a class="code">push()</a>和<a class="code">pop()</a>之间进行的任何变换都将隔离到代码的该部分。 如果不使用<a class="code">push()</a>和<a class="code">pop()</a>，则必须跟踪已经发生的任何变换，这可能会变得复杂并且难以理解。 考虑下面的示例，在我们的草图中放置了两个盒子。 如果不使用<a class="code">push()</a>和<a class="code">pop()</a>来定位第二个盒子，则必须考虑第一个变换。 在更复杂的3D场景中，这可能会很难跟踪。<a class="code"
          href="/zh-Hans/reference/#/p5/push">push()</a> 和 <a class="code"
          href="/zh-Hans/reference/#/p5/pop">pop()</a> <a class="code">push()</a>和<a class="code">pop()</a>使单独移动对象更容易。 <a class="code">push()</a>方法保存当前变换和样式设置。 然后，在执行新的变换之后，使用<a class="code">pop()</a>方法将我们恢复到原始变换。 结果是，在<a class="code">push()</a>和<a class="code">pop()</a>之间进行的任何变换或样式更改都会隔离到代码的该部分。 如果不使用<a class="code">push()</a>和<a class="code">pop()</a>，则必须跟踪已经发生的任何变换，这可能会变得复杂并且难以理解。 考虑下面的示例，在我们的草图中放置了两个盒子。如果不使用<a class="code">push()</a>和<a class="code">pop()</a>来定位第二个盒子，则必须考虑第一个变换。 在更复杂的3D场景中，这可能会很难跟踪。</p>

      <pre><code class="language-javascript">
      // draw a box 100 units to the right
      translate(100,0,0);
      box();

      // now, to draw another box 100 units to the left
      // since transformations accumulate, we have to
      // subtract 200 to do this
      translate(-200,0,0);
      box();
      </code></pre>

      <p>现在让我们尝试使用<a class="code">push()</a>和<a class="code">pop()</a>来做同样的事情。 现在，我们可以将对象平移至想要的位置，而无需记住坐标系统的位置。</p>

      <pre><code class="language-javascript">
      push(); // detach our coordinate system
      // draw a box 100 units to the right
      translate(100,0,0);
      box();
      pop(); // return to our original coordinate system

      push(); // detach our coordinate system
      // draw a box 100 units to the left
      translate(-100,0,0);
      box();
      pop(); // return to our original coordinate system
      </code></pre>

      <div class="additionalInformation">
        尽管这是一个更高级的主题，但每个变换都会影响到所谓的模型矩阵。 变换矩阵与视图矩阵和投影矩阵相结合，这两个矩阵帮助模拟相机的视图， 这种组合结果形成了我们的3D场景！<a href="https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_model_view_projection">了解有关模型视图投影的更多信息</a>
      </div>

      <p>在下面的示例中，尝试删除<a class="code">push()</a>和<a class="code">pop()</a>，看看这些变换如何影响绘制的第二个对象。</p>

      <script type="text/p5" data-autoplay data-p5-version="1.6.0">
function setup() {
  createCanvas(150, 216, WEBGL);
  debugMode();
  describe('two white boxes with a number of transformations applied');
}

function draw() {
  background(255);
  camera(100, -100, 100);

  push(); // detach our coordinate system
  
  // draw a box 100 units along the x-axis
  translate(50, 0, 0);
  rotateY(PI/4);
  box(30);
  pop(); // return to our original coordinate system

  // draw a second box -50 units along the x-axis
  translate(-50, 0, 0);
  rotateY(PI/4);
  box(30);
}
      </script>

      <h2 id="basic_shapes">3D中的基本形状</h2>

      <p>到目前为止，我们只使用了<a class="code">box()</a>，但p5.js还有七个不同的预定义几何形状，您可以在您的草图中使用这些基本的预定义几何形状，这些基本的预定义几何形状通常被称为“原语”。</p>

      <img style="padding:60px;" src='../../assets/learn/basic3d/images/primitives_example.png'
        alt="an illustration showing each of the available primitives in p5.js">

      <p>这些原语形状方法包括：<a class="code" href="{{root}}/reference/#/p5/box">box()</a>，<a class="code" href="{{root}}/reference/#/p5/plane">plane()</a>，<a class="code" href="{{root}}/reference/#/p5/sphere">sphere()</a>，<a class="code" href="{{root}}/reference/#/p5/ellipsoid">ellipsoid()</a>，<a class="code" href="{{root}}/reference/#/p5/cone">cone()</a>，<a class="code" href="{{root}}/reference/#/p5/cylinder">cylinder()</a>和<a class="code" href="{{root}}/reference/#/p5/torus">torus()</a>。<a class="code"
          href="/zh-Hans/reference/#/p5/box">box()</a>, <a class="code" href="/zh-Hans/reference/#/p5/plane">plane()</a>, 
        <a class="code" href="/zh-Hans/reference/#/p5/sphere">sphere()</a>, 
        <a class="code" href="/zh-Hans/reference/#/p5/ellipsoid">ellipsoid()</a>, 
        <a class="code" href="/zh-Hans/reference/#/p5/cone">cone()</a>, 
        <a class="code" href="/zh-Hans/reference/#/p5/cylinder">cylinder()</a>, and <a class="code"
          href="/zh-Hans/reference/#/p5/torus">torus()</a>.
      </p>

      <p>可以从头开始或从另一个程序创建的3D模型创建自定义几何体。有关自定义几何体的更多信息，请参阅 <a href="{{root}}/learn/getting-started-in-webgl-custom-geometry.html">自定义几何体教程</a>.<a
          href="/zh-Hans/learn/getting-started-in-webgl-custom-geometry.html">自定义几何体教程    </a>.</p>

      <h2 id="conclusion">结论</h2>

      <p>通过掌握基本的 3D 坐标空间控制、变换和基本形状，您应该能够开始创建基本的 3D 场景。在《WebGL 入门》系列中，本教程后面的教程将介绍自定义几何、允许您调整场景外观，并向您介绍一些基本着色器编程，以推进您的草图更进一步。</p>

      <h3>其他教程</h3>

      <p>这个教程是关于使用 p5.js 中 WebGL 基础的系列之一。以下是其他教程： </p>

      <ul class="indexList">
        <li>坐标和变换 （你现在处于这里）</li>
        <li><a href="/zh-Hans/learn/getting-started-in-webgl-custom-geometry.html">在 WebGL 中创建自定义几何图形</a></li>
        <li><a href="/zh-Hans/learn/getting-started-in-webgl-appearance.html">样式和外观</a></li>
        <li><a href="/zh-Hans/learn/getting-started-in-webgl-shaders.html">入门 Shaders</a></li>
      </ul>

      <h2 id="glossary">词汇表</h2>

      <h3>GPU（图形处理单元）</h3>
      <p>GPU（图形处理单元）是一种特别适合并行计算的硬件，使其在3D图形方面非常强大。</p>

      <h3>模型</h3>
      <p>可以从文件中保存和加载的自定义3D几何图形。</p>

      <h3>矩阵</h3>
      <p>一种特殊的数组，可以保存关于几何变换的信息。</p>

      <h3>相机</h3>
      <p>3D场景的视点。</p>

      <h3>变换</h3>
      <p>也称为 <em>transformation</em>，这指的是几何体的组合缩放、旋转和平移。</p>

      <h3>顶点</h3>
      <p>3D空间中的一个点，具有 x、y、z 位置。</p>

      <h3>面</h3>
      <p>由三个点组成的实体表面。</p>

    </main>

    
    <footer>
        <h2 class="sr-only">归功于</h2>
        <ul id="footer-menu" aria-labelledby="menu-title">   
          <li><a href="https://discourse.processing.org/c/p5js" target=_blank class="other-link">论坛</a></li>
          <li><a href="http://github.com/processing/p5.js" target=_blank class="other-link">GitHub</a></li>
          <li><a href="http://twitter.com/p5xjs" target=_blank class="other-link">Twitter</a></li>
          <li><a href="https://www.instagram.com/p5xjs/" target=_blank class="other-link">Instagram</a></li>
          <li><a href="https://discord.gg/SHQ8dH25r9" target=_blank class="other-link">Discord</a></li>
        </ul>  
        
        <p>
            p5.js 目前由<a href='http://qianqian-ye.com/' target="_blank">Qianqian Ye</a>领导，原创者为<a href='https://lauren-mccarthy.com' target="_blank">Lauren Lee McCarthy</a>。p5.js 是在<a href="https://processingfoundation.org/" target="_blank">Processing Foundation</a>和<a href="https://itp.nyu.edu/itp/" target="_blank">NYU ITP</a>的支持下由其合作社群所开发。形象及平面设计<a href="https://jereljohnson.com/" target="_blank">Jerel Johnson</a>。<a href="/zh-Hans/copyright.html">&copy; 版权信息</a>。
        </p>
    </footer>

  </div> <!-- end column-span -->

  
  <!-- outside of column for footer to go across both -->
  
  <p class="clearfix"> &nbsp; </p>
  
  <object type="image/svg+xml" data="../../assets/img/thick-asterisk-alone.svg" id="asterisk-design-element" aria-hidden="true">
  </object>

</div><!-- end id="get-started-page"  -->

    </div> <!-- close class='container'-->

    
    <nav id="family" aria-labelledby="processing-sites-heading">
      <h2 id="processing-sites-heading" class="sr-only">Processing Sister Sites</h2>
      <ul id="processing-sites" aria-labelledby="processing-sites-heading">
        <li><a href="https://processing.org">Processing</a></li>
        <li><a class="here" href="/zh-Hans/">p5.js</a></li>
        <li><a href="https://py.processing.org/">Processing.py</a></li>
        <li><a href="https://android.processing.org/">Processing for Android</a></li>
        <li><a href="https://pi.processing.org/">Processing for Pi</a></li>
        <li><a href="https://processingfoundation.org/">Processing Foundation</a></li>
      </ul>
      <a tabindex="1" href="#content" id="skip-to-content">Skip to main content</a>
    
    
    </nav>
    <script>
    var langs = ["en","es","hi","ko","zh-Hans"];

      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-53383000-1', 'auto');
    ga('send', 'pageview');

    $(window).ready(function() {
      if (window.location.pathname !== '/' && window.location.pathname !== '/index.html') {
        $('#top').remove();
      } else {
        $('#top').show();
      }
    });
    </script>


  </body>
</html>
